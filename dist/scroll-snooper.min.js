/**!
 * Scroll Snooper v2.0.0
 * @author phucbm
 * @homepage https://github.com/phucbm/scroll-snooper
 * @license MIT 2022
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o=e();for(var n in o)("object"==typeof exports?exports:t)[n]=o[n]}}(this,(()=>(()=>{"use strict";var t,e={r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},o={};function n(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}}function i(){return{left:(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),top:(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)}}function r(t){return function(t){return"undefined"!=typeof jQuery&&t instanceof jQuery}(t)?t.get()[0]:t}function s(t){if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect(),o=t.ownerDocument.defaultView;return{top:e.top+o.pageYOffset,left:e.left+o.pageXOffset}}function l(t,e=n().h){let o={top:0,center:.5,bottom:1}[t];return"number"==typeof o?o:t.includes("%")?parseInt(t)/100:t.includes("px")?parseInt(t)/e:o}function p(t,e=i().h){const o=t.split(" "),n=l(o[0],e),i=l(o[1]);return{element:n,viewport:i}}function f(t,e){const o=p(e,t.offsetHeight);return s(t).top+t.offsetHeight*o.element-(i().top+n().h*o.viewport)}function d(t,e,o){if(void 0===t)return 0;const n=f(t,e);return-1*n/(f(t,o)-n)}function c(t=!0,e=!0,o=0){const n=document.createElement("div"),i=e?"#6495edff":"#dc143cff";n.style.cssText="right:0; z-index:99999; width:40px; height:0; pointer-events:none; font-size:14px;",n.style.position=t?"fixed":"absolute",n.style.backgroundColor=!t&&e?"rgba(100,149,237,0.1)":"",n.style.color=i,n.style.borderTop=`1px solid ${i}`,document.body.appendChild(n);const r=document.createElement("span");return r.innerText=e?"start":"end",n.appendChild(r),(t&&o>.9||!t&&!e)&&(r.style.cssText="position:absolute; bottom:0; left:0;"),n}return e.r(o),(t=window.ScrollSnooper=window.ScrollSnooper||{}).isInViewport=(e,o=0)=>{const n=d(r(e),"top bottom","bottom top"),i=n>0&&n<=1;return t.visibility(e).proportion>=o&&i},t.visibility=t=>{const e=function(t){const e=s(t).left,o=s(t).top,r=t.offsetWidth,l=t.offsetHeight,p=o-i().top,f=p-n().h,d=p+l;return{top_top:p,top_bottom:f,bottom_bottom:f+l,bottom_top:d,center_top:d-.5*l,center_bottom:f+.5*l,left:e,top:o,offsetWidth:r,offsetHeight:l}}(t=r(t)),o=Math.max(0,Math.min(t.offsetHeight,-1*e.top_bottom)),l=Math.max(0,Math.min(t.offsetHeight,e.bottom_top)),p=Math.min(o,l,n().h);return{pixel:p,proportion:p/t.offsetHeight}},t.getTheMostVisible=(e,o=0)=>{let n,i,r={pixel:0},s=!1,l=0;for(const p of e){const e=t.visibility(p);e.pixel>=o&&e.pixel>r.pixel&&(r=e,n=p,i=l,s=!0),l++}return{isFound:s,index:i,el:n,...r}},t.create=e=>{const o={trigger:void 0,start:"top bottom",end:"bottom top",visibility:!1,markers:!1,progressOutOfView:!1,onEnter:t=>{},onLeave:t=>{},onScroll:t=>{},isGetTheMostVisible:!1,atLeastPixel:0,onChange:t=>{},onFound:t=>{},...e};let l,f=!1,u=i().top;const m=r(o.trigger),a={};o.markers&&(a.start=p(o.start),a.end=p(o.end),a.viewportStart=c(!0,!0,a.start.viewport),a.viewportStart.style.top=100*a.start.viewport+"%",a.viewportEnd=c(!0,!1,a.end.viewport),a.viewportEnd.style.top=100*a.end.viewport+"%",a.elementStart=c(!1,!0),a.elementEnd=c(!1,!1));let g=null;const h=()=>JSON.stringify({...i(),...n()}),b=()=>{g!==h()&&((()=>{if(o.isGetTheMostVisible){const e=t.getTheMostVisible(o.trigger,o.atLeastPixel);void 0!==l&&e.index===l.index||(l=e,o.onChange({mostVisible:e}),e.isFound&&o.onFound({...e}))}else{const e=d(m,o.start,o.end);let n={trigger:m,progress:e,direction:i().top>u?-1:1,isInViewport:e>0&&e<1};if(u=i().top,n.isInViewport)f||(f=!0,o.onEnter(n));else if(f)f=!1,o.onLeave(n);else if(!o.progressOutOfView)return!1;if(o.markers){const t=s(m).top,e=m.offsetHeight*a.start.element,o=m.offsetHeight*a.end.element;a.elementStart.style.top=`${t+e}px`,a.elementEnd.style.top=`${t+o}px`,a.elementStart.style.height=o-e+"px"}o.visibility&&(n={...n,visibility:t.visibility(m)}),o.onScroll(n)}})(),g=h()),window.requestAnimationFrame(b)};window.requestAnimationFrame(b)},o})()));