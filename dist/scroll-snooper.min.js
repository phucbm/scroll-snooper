/**!
 * Scroll Snooper v2.0.0
 * @author phucbm
 * @homepage https://github.com/phucbm/scroll-snooper
 * @license MIT 2024
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var o=e();for(var i in o)("object"==typeof exports?exports:t)[i]=o[i]}}(this,(()=>(()=>{"use strict";var t={r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}},e={};function o(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}}function i(){return{left:(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),top:(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)}}function n(t){return function(t){return"undefined"!=typeof jQuery&&t instanceof jQuery}(t)?t.get()[0]:t}function r(t){if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect(),o=t.ownerDocument.defaultView;return{top:e.top+o.pageYOffset,left:e.left+o.pageXOffset}}function l(t,e=o().h){let i={top:0,left:0,center:.5,bottom:1,right:1}[t];return"number"==typeof i?i:t.includes("%")?parseInt(t)/100:t.includes("px")?parseInt(t)/e:i}function s(t,e=n().h){const o=t.split(" "),i=l(o[0],e),n=l(o[1]);return{element:i,viewport:n}}function f(t,e,n="vertical"){const l=s(e,"vertical"===n?t.offsetHeight:t.offsetWidth);return("vertical"===n?r(t).top+t.offsetHeight*l.element:r(t).left+t.offsetWidth*l.element)-("vertical"===n?i().top+o().h*l.viewport:i().left+o().w*l.viewport)}function c(t,e,o,i="vertical"){if(void 0===t)return 0;const n=f(t,e,i);return-1*n/(f(t,o,i)-n)}function p(t=!0,e=!0,o=0,i="vertical"){const n=document.createElement("div"),r=e?"#6495edff":"#dc143cff";n.style.cssText=`${"vertical"===i?"right":"bottom"}:0; z-index:99999; ${"vertical"===i?"width:40px; height:0;":"height:40px; width:0;"} pointer-events:none; font-size:14px;`,n.style.position=t?"fixed":"absolute",n.style.backgroundColor=!t&&e?"rgba(100,149,237,0.1)":"",n.style.color=r,n.style["vertical"===i?"borderTop":"borderLeft"]=`1px solid ${r}`,document.body.appendChild(n);const l=document.createElement("span");return l.innerText=e?"start":"end",n.appendChild(l),(t&&o>.9||!t&&!e)&&(l.style.cssText="position:absolute; "+("vertical"===i?"bottom:0; left:0;":"top:0; right:0;")),n}return t.r(e),function(t){const e=t=>{const e=i();return"horizontal"===t?e.left:e.top};t.isInViewport=(e,o=0,i="vertical")=>{const r="vertical"===i?"top bottom":"left right",l="vertical"===i?"bottom top":"right left",s=c(n(e),r,l,i),f=s>0&&s<=1,p=t.visibility(e,i).proportion>=o;return console.log("isValidProportion",t.visibility(e,i).proportion,"progress",s),p&&f},t.visibility=(t,e="vertical")=>{const l=function(t,e="vertical"){const n=r(t).left,l=r(t).top,s=t.offsetWidth,f=t.offsetHeight,c=i(),p=o();if("vertical"===e){const t=l-c.top,e=t-p.h,o=t+f;return{top_top:t,top_bottom:e,bottom_bottom:e+f,bottom_top:o,center_top:o-.5*f,center_bottom:e+.5*f,left:n,top:l,offsetWidth:s,offsetHeight:f}}{const t=n-c.left,e=t-p.w,o=t+s;return{left_left:t,left_right:e,right_right:e+s,right_left:o,center_left:o-.5*s,center_right:e+.5*s,left:n,top:l,offsetWidth:s,offsetHeight:f}}}(t=n(t),e),s="horizontal"===e,f=s?t.offsetWidth:t.offsetHeight,c=(t=>{const e=o();return"horizontal"===t?e.w:e.h})(e),p=Math.max(0,Math.min(f,-1*(s?l.left_right:l.top_bottom))),a=Math.max(0,Math.min(f,s?l.right_left:l.bottom_top)),d=Math.min(p,a,c),u=d/f;return console.log("offset",l,"visible_start",a),{pixel:d,proportion:u}},t.getTheMostVisible=(e,o=0,i="vertical")=>{let n,r,l={pixel:0},s=!1,f=0;for(const c of e){const e=t.visibility(c,i);e.pixel>=o&&e.pixel>l.pixel&&(l=e,n=c,r=f,s=!0),f++}return{isFound:s,index:r,el:n,...l}},t.create=l=>{const f={trigger:void 0,orientation:"vertical",visibility:!1,markers:!1,progressOutOfView:!1,onEnter:t=>{},onLeave:t=>{},onScroll:t=>{},isGetTheMostVisible:!1,atLeastPixel:0,onChange:t=>{},onFound:t=>{},...l};f.start=f.start||("vertical"===f.orientation?"top bottom":"left right"),f.end=f.end||("vertical"===f.orientation?"bottom top":"right left");let a,d=!1,u=e(f.orientation);const m=n(f.trigger),h={};f.markers&&(h.start=s(f.start),h.end=s(f.end),h.viewportStart=p(!0,!0,h.start.viewport),h.viewportStart.style.top=100*h.start.viewport+"%",h.viewportEnd=p(!0,!1,h.end.viewport),h.viewportEnd.style.top=100*h.end.viewport+"%",h.elementStart=p(!1,!0),h.elementEnd=p(!1,!1));let g=null;const v=()=>JSON.stringify({...i(),...o()}),b=()=>{g!==v()&&((()=>{if(f.isGetTheMostVisible){const e=t.getTheMostVisible(f.trigger,f.atLeastPixel,f.orientation);void 0!==a&&e.index===a.index||(a=e,f.onChange({mostVisible:e}),e.isFound&&f.onFound({...e}))}else{const o=c(m,f.start,f.end,f.orientation),i=e(f.orientation);let n={trigger:m,progress:o,direction:i>u?-1:1,isInViewport:o>0&&o<1};if(u=i,n.isInViewport)d||(d=!0,f.onEnter(n));else if(d)d=!1,f.onLeave(n);else if(!f.progressOutOfView)return!1;if(f.markers){const t=r(m),e="horizontal"===f.orientation,o=e?m.offsetWidth:m.offsetHeight,i=o*h.start.element,n=o*h.end.element;h.elementStart.style[e?"left":"top"]=`${(e?t.left:t.top)+i}px`,h.elementEnd.style[e?"left":"top"]=`${(e?t.left:t.top)+n}px`,h.elementStart.style[e?"width":"height"]=n-i+"px"}f.visibility&&(n={...n,visibility:t.visibility(m,f.orientation)}),f.onScroll(n)}})(),g=v()),window.requestAnimationFrame(b)};window.requestAnimationFrame(b)}}(window.ScrollSnooper=window.ScrollSnooper||{}),e})()));