/**!
 * Scroll Snooper v2.0.0
 * @author phucbm
 * @homepage https://github.com/phucbm/scroll-snooper
 * @license MIT 2024
 */
function t(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}}function e(){return{left:(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),top:(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0)}}function o(t){return function(t){return"undefined"!=typeof jQuery&&t instanceof jQuery}(t)?t.get()[0]:t}function i(t){if(!t.getClientRects().length)return{top:0,left:0};const e=t.getBoundingClientRect(),o=t.ownerDocument.defaultView;return{top:e.top+o.pageYOffset,left:e.left+o.pageXOffset}}function n(e,o=t().h){let i={top:0,left:0,center:.5,bottom:1,right:1}[e];return"number"==typeof i?i:e.includes("%")?parseInt(e)/100:e.includes("px")?parseInt(e)/o:i}function r(t,e=r().h){const o=t.split(" "),i=n(o[0],e),r=n(o[1]);return{element:i,viewport:r}}function l(o,n,l="vertical"){const s=r(n,"vertical"===l?o.offsetHeight:o.offsetWidth);return("vertical"===l?i(o).top+o.offsetHeight*s.element:i(o).left+o.offsetWidth*s.element)-("vertical"===l?e().top+t().h*s.viewport:e().left+t().w*s.viewport)}function s(t,e,o,i="vertical"){if(void 0===t)return 0;const n=l(t,e,i);return-1*n/(l(t,o,i)-n)}function f(t=!0,e=!0,o=0,i="vertical"){const n=document.createElement("div"),r=e?"#6495edff":"#dc143cff";n.style.cssText=`${"vertical"===i?"right":"bottom"}:0; z-index:99999; ${"vertical"===i?"width:40px; height:0;":"height:40px; width:0;"} pointer-events:none; font-size:14px;`,n.style.position=t?"fixed":"absolute",n.style.backgroundColor=!t&&e?"rgba(100,149,237,0.1)":"",n.style.color=r,n.style["vertical"===i?"borderTop":"borderLeft"]=`1px solid ${r}`,document.body.appendChild(n);const l=document.createElement("span");return l.innerText=e?"start":"end",n.appendChild(l),(t&&o>.9||!t&&!e)&&(l.style.cssText="position:absolute; "+("vertical"===i?"bottom:0; left:0;":"top:0; right:0;")),n}!function(n){const l=t=>{const o=e();return"horizontal"===t?o.left:o.top};n.isInViewport=(t,e=0,i="vertical")=>{const r="vertical"===i?"top bottom":"left right",l="vertical"===i?"bottom top":"right left",f=s(o(t),r,l,i),c=f>0&&f<=1,p=n.visibility(t,i).proportion>=e;return console.log("isValidProportion",n.visibility(t,i).proportion,"progress",f),p&&c},n.visibility=(n,r="vertical")=>{const l=function(o,n="vertical"){const r=i(o).left,l=i(o).top,s=o.offsetWidth,f=o.offsetHeight,c=e(),p=t();if("vertical"===n){const t=l-c.top,e=t-p.h,o=t+f;return{top_top:t,top_bottom:e,bottom_bottom:e+f,bottom_top:o,center_top:o-.5*f,center_bottom:e+.5*f,left:r,top:l,offsetWidth:s,offsetHeight:f}}{const t=r-c.left,e=t-p.w,o=t+s;return{left_left:t,left_right:e,right_right:e+s,right_left:o,center_left:o-.5*s,center_right:e+.5*s,left:r,top:l,offsetWidth:s,offsetHeight:f}}}(n=o(n),r),s="horizontal"===r,f=s?n.offsetWidth:n.offsetHeight,c=(e=>{const o=t();return"horizontal"===e?o.w:o.h})(r),p=Math.max(0,Math.min(f,-1*(s?l.left_right:l.top_bottom))),a=Math.max(0,Math.min(f,s?l.right_left:l.bottom_top)),d=Math.min(p,a,c),u=d/f;return console.log("offset",l,"visible_start",a),{pixel:d,proportion:u}},n.getTheMostVisible=(t,e=0,o="vertical")=>{let i,r,l={pixel:0},s=!1,f=0;for(const c of t){const t=n.visibility(c,o);t.pixel>=e&&t.pixel>l.pixel&&(l=t,i=c,r=f,s=!0),f++}return{isFound:s,index:r,el:i,...l}},n.create=c=>{const p={trigger:void 0,orientation:"vertical",visibility:!1,markers:!1,progressOutOfView:!1,onEnter:t=>{},onLeave:t=>{},onScroll:t=>{},isGetTheMostVisible:!1,atLeastPixel:0,onChange:t=>{},onFound:t=>{},...c};p.start=p.start||("vertical"===p.orientation?"top bottom":"left right"),p.end=p.end||("vertical"===p.orientation?"bottom top":"right left");let a,d=!1,u=l(p.orientation);const h=o(p.trigger),m={};p.markers&&(m.start=r(p.start),m.end=r(p.end),m.viewportStart=f(!0,!0,m.start.viewport),m.viewportStart.style.top=100*m.start.viewport+"%",m.viewportEnd=f(!0,!1,m.end.viewport),m.viewportEnd.style.top=100*m.end.viewport+"%",m.elementStart=f(!1,!0),m.elementEnd=f(!1,!1));let g=null;const v=()=>JSON.stringify({...e(),...t()}),w=()=>{g!==v()&&((()=>{if(p.isGetTheMostVisible){const t=n.getTheMostVisible(p.trigger,p.atLeastPixel,p.orientation);void 0!==a&&t.index===a.index||(a=t,p.onChange({mostVisible:t}),t.isFound&&p.onFound({...t}))}else{const t=s(h,p.start,p.end,p.orientation),e=l(p.orientation);let o={trigger:h,progress:t,direction:e>u?-1:1,isInViewport:t>0&&t<1};if(u=e,o.isInViewport)d||(d=!0,p.onEnter(o));else if(d)d=!1,p.onLeave(o);else if(!p.progressOutOfView)return!1;if(p.markers){const t=i(h),e="horizontal"===p.orientation,o=e?h.offsetWidth:h.offsetHeight,n=o*m.start.element,r=o*m.end.element;m.elementStart.style[e?"left":"top"]=`${(e?t.left:t.top)+n}px`,m.elementEnd.style[e?"left":"top"]=`${(e?t.left:t.top)+r}px`,m.elementStart.style[e?"width":"height"]=r-n+"px"}p.visibility&&(o={...o,visibility:n.visibility(h,p.orientation)}),p.onScroll(o)}})(),g=v()),window.requestAnimationFrame(w)};window.requestAnimationFrame(w)}}(window.ScrollSnooper=window.ScrollSnooper||{});